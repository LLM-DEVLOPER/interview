## VII. 分布式系统与微服务

### A. 分布式理论与基础

##### 1. 什么是分布式系统？它与集群有什么区别？ ★★★☆☆

##### 2. 什么是CAP原理？为什么不能同时满足？ ★★★★☆

##### 3. 什么是BASE理论？它与ACID有什么关系？ ★★★☆☆

##### 4. 什么是拜占庭将军问题？ ★★★☆☆

##### 5. 什么是最终一致性？分布式系统的一致性有哪些分类？ ★★★★☆

##### 6. 什么是Paxos/Raft算法？ ★★★☆☆

##### 7. 什么是柔性事务？ ★★★☆☆

##### 8. 什么是一致性哈希？其原理和应用场景是什么？ ★★★★☆

### B. 分布式事务解决方案

##### 1. 什么是分布式事务？ ★★★★☆

##### 2. 分布式事务如何实现？ ★★★★★

##### 3. 什么是两阶段提交（2PC）？其原理、优缺点和适用场景是什么？ ★★★★☆

##### 4. 为什么有了2PC还需要3PC？什么是三阶段提交（3PC）？它比2PC有什么改进？ ★★★☆☆

##### 5. 什么是TCC（Try-Confirm-Cancel）分布式事务？其原理、优缺点和适用场景是什么？ ★★★★☆

##### 6. TCC的空回滚和悬挂（取消）是什么？如何解决？ ★★★★☆

##### 7. TCC中，Confirm或者Cancel失败了怎么办？ ★★★★☆

##### 8. TCC是强一致性还是最终一致性？ ★★★★☆

##### 9. 什么是Saga模式？其原理、优缺点和适用场景是什么？ ★★★★☆

##### 10. Seata是什么？它支持哪些分布式事务模式？ ★★★☆☆

##### 11. Seata的实现原理是什么？Seata的4种事务模式，各自适合的场景是什么？ ★★★★☆

##### 12. Seata的AT模式和XA模式有什么区别？ ★★★★☆

##### 13. Seata的AT模式会不会出现脏读？为什么？ ★★★★☆

##### 14. 如何基于MQ实现分布式事务？ ★★★★☆

##### 15. 如何基于本地消息表实现分布式事务？ ★★★★☆

##### 16. 什么是最大努力通知？最大努力通知&事务消息&本地消息表三者区别是什么？ ★★★★☆

##### 17. 为什么不建议用数据库唯一约束做幂等控制？ ★★★☆☆

### C. 分布式ID生成方案

##### 1. 分布式ID的生成策略都有哪些？ ★★★★☆

##### 2. 简述雪花算法（Snowflake）的原理？如何保证不重复？它解决了什么问题？ ★★★★★

##### 3. UUID作为分布式ID有什么优缺点？ ★★★☆☆

##### 4. 数据库自增ID作为分布式ID有什么优缺点？如何优化？ ★★★☆☆

##### 5. Redis自增ID作为分布式ID有什么优缺点？ ★★★☆☆

##### 6. 详细介绍下号段模式生成分布式ID的原理和优缺点？Leaf生成分布式ID的原理？ ★★★★☆

##### 7. 每张表自增不行吗？为什么要用全局分布式ID？ ★★★☆☆

### D. 分布式锁实现

##### 1. 分布式锁的实现方式有哪些？ ★★★★☆

##### 2. Redis分布式锁如何实现？其基本原理是什么？ ★★★★★

##### 3. Redis分布式锁有什么缺陷？如何解决死锁问题？ ★★★★★

##### 4. Redis分布式锁如何续期？Redis锁超时任务没完怎么办？ ★★★★★

##### 5. 分布式锁最终解决方案是RedLock吗？为什么？ ★★★★☆

##### 6. Redisson如何实现分布式锁？ ★★★★☆

##### 7. Zookeeper分布式锁如何实现？ ★★★☆☆

##### 8. Redis分布式锁和Zookeeper分布式锁有哪些区别？哪个对死锁友好？ ★★★★☆

##### 9. 实现一个分布式锁需要考虑哪些问题？ ★★★☆☆

##### 10. 定时任务扫锁的缺点有什么？ ★★★☆☆

##### 11. 如何实现分布式Session？ ★★★★☆

### E. 消息队列（Kafka, RabbitMQ, RocketMQ）

##### 1. 为什么使用消息队列？消息队列有哪些优点和缺点？ ★★★★☆

##### 2. Kafka、ActiveMQ、RabbitMQ和RocketMQ都有哪些区别？ ★★★★☆

##### 3. 什么是消息幂等性？如何保证？ ★★★★☆

##### 4. 什么是事务消息？为什么需要事务消息？ ★★★★☆

##### 5. 什么是死信队列（DLQ）？其作用是什么？ ★★★★☆

#### Kafka

##### 1. Kafka为什么这么快？ ★★★★☆

##### 2. Kafka的架构设计是怎样的？ ★★★☆☆

##### 3. Kafka如何保证消息不丢失？为什么Kafka没办法100%保证消息不丢失？ ★★★★★

##### 4. Kafka如何保证消息只消费一次？ ★★★★☆

##### 5. Kafka如何实现顺序消费？ ★★★★☆

##### 6. Kafka几种选举过程简单介绍一下？ ★★★☆☆

##### 7. 为什么Kafka需要Leader Epoch？ ★★★☆☆

##### 8. Kafka高水位（High Watermark）了解吗？如何实现的？ ★★★☆☆

##### 9. Kafka中的Offset是什么？ ★★★☆☆

##### 10. 为什么Kafka依赖Zookeeper，有什么用？ ★★★☆☆

##### 11. 什么是Kafka的重平衡机制？Kafka的渐进式重平衡？ ★★★★☆

##### 12. Kafka的消费者数量和分区数量可以不同吗？会发生什么？ ★★★★☆

##### 13. MQ的重平衡会带来哪些问题？ ★★★☆☆

##### 14. Kafka如何实现批量消费？Kafka的批量消费如何确保消息不丢失？ ★★★☆☆

##### 15. Kafka消息的发送过程简单介绍一下？ ★★★☆☆

##### 16. Kafka如果丢消息了，可能的原因是什么？ ★★★☆☆

##### 17. 为什么Kafka有Topic还要用Partition？ ★★★★☆

##### 18. Kafka支持事务消息吗？如何实现的？ ★★★★☆

##### 19. Kafka消费者如何处理消息分发？ ★★★☆☆

##### 20. 介绍下Kafka的ISR机制？其原理是什么？ ★★★★☆

#### RocketMQ

##### 1. RocketMQ的架构是怎样的？ ★★★★☆

##### 2. RocketMQ的事务消息是如何实现的？ ★★★★☆

##### 3. RocketMQ如何保证消息的顺序性？ ★★★★☆

##### 4. RocketMQ如何保证消息不丢失？ ★★★★★

##### 5. RocketMQ如何实现延迟消息？ ★★★☆☆

##### 6. RocketMQ有几种集群方式？ ★★★☆☆

##### 7. RocketMQ消息堆积了怎么解决？ ★★★★☆

##### 8. 介绍一下RocketMQ的工作流程？ ★★★☆☆

##### 9. RocketMQ怎么实现消息分发的？ ★★★☆☆

##### 10. RocketMQ的消息是推还是拉？ ★★★☆☆

##### 11. 用了RocketMQ一定能实现削峰的效果吗？ ★★★☆☆

##### 12. 介绍下RocketMQ 5.0中的pop模式？ ★★★☆☆

##### 13. RocketMQ的事务消息和Kafka的事务消息有什么区别？ ★★★★☆

##### 14. RocketMQ和Kafka一样有重平衡的问题吗？ ★★★★☆

##### 15. RocketMQ如果丢消息了，可能的原因是什么？ ★★★☆☆

##### 16. RocketMQ如果重复消费了，可能是什么原因导致的？ ★★★☆☆

#### RabbitMQ

##### 1. RabbitMQ的整体架构是怎样的？ ★★★★☆

##### 2. RabbitMQ是怎么做消息分发的？ ★★★★☆

##### 3. RabbitMQ如何实现延迟消息？ ★★★☆☆

##### 4. RabbitMQ的死信队列是什么？ ★★★☆☆

##### 5. RabbitMQ是如何保证高可用的？ ★★★★☆

##### 6. RabbitMQ如何实现消费端限流？ ★★★☆☆

##### 7. RabbitMQ如何防止重复消费？ ★★★★☆

##### 8. 如何保障消息一定能发送到RabbitMQ？ ★★★★☆

##### 9. RabbitMQ如何保证消息不丢？ ★★★★★

##### 10. 介绍下RabbitMQ的事务机制？ ★★★☆☆

### F. 服务间通信（REST, RPC, gRPC）

##### 1. 微服务之间有哪些调用方式？ ★★★☆☆

##### 2. 什么是RESTful API？其特点和优缺点是什么？ ★★★☆☆

##### 3. 什么是RPC（Remote Procedure Call）？其核心思想和特点是什么？ ★★★★☆

##### 4. RPC框架需要解决哪些问题？ ★★★★☆

##### 5. 什么是gRPC？它与REST和传统RPC有什么区别？ ★★★★☆

##### 6. RPC要比HTTP更快一些吗？为什么？ ★★★★☆

##### 7. 什么场景只能用HTTP，不能用RPC？ ★★★☆☆

##### 8. Dubbo与Spring Cloud在服务通信上有什么区别？ ★★★★☆

##### 9. Feign和RestTemplate有什么不同？ ★★★☆☆

### G. 分库分表

##### 1. 什么是分库？分表？分库分表？ ★★★★☆

##### 2. 什么是分库分表？其必要性与应用场景是什么？ ★★★★☆

##### 3. 垂直拆分（分库、分表）与水平拆分（分库、分表）的区别是什么？ ★★★★☆

##### 4. 分库分表的常见策略有哪些？（范围、哈希、取模、一致性哈希） ★★★★☆

##### 5. 什么是分片键？分片键的设计原则有哪些？分表字段如何选择？ ★★★★☆

##### 6. 分表算法都有哪些？ ★★★★☆

##### 7. 分区和分表有什么区别？ ★★★☆☆

##### 8. 分库分表后，全局主键如何生成？有哪些方案？（如雪花算法、UUID、数据库自增等） ★★★★☆

##### 9. 分库分表后，事务如何处理？（本地事务 + 最终一致性、分布式事务解决方案） ★★★★★

##### 10. 分库分表后，跨分片Join如何处理？ ★★★★☆

##### 11. 分库分表后，查询复杂性如何处理？（如排序、聚合、分页） ★★★★☆

##### 12. 分库分表后，数据扩容和迁移如何处理？分库分表后，还不够怎么办？分库分表后怎么设计可以降低数据迁移的难度？ ★★★☆☆

##### 13. 什么是数据倾斜？会带来哪些问题？如何解决？ ★★★★☆

##### 14. 分库分表的取模算法策略如何避免数据倾斜？ ★★★☆☆

##### 15. 分库分表的数量为什么一般选择2的幂？ ★★★☆☆

##### 16. ShardingJDBC有哪些分片策略，你用哪个？ShardingJDBC在查询的时候如果没有分片键，他怎么样？ ★★★☆☆

##### 17. 在分库分表时，如果遇到了对商品名称的模糊查询，要怎么处理？ ★★★☆☆

##### 18. 分库分表中，如何预估需要多少个库？多少张表？ ★★★☆☆

### H. 微服务架构与治理

##### 1. 什么是微服务架构？优势？特点？ ★★★★☆

##### 2. 分布式和微服务的区别是什么？ ★★★★☆

##### 3. SOA和微服务之间的主要区别是什么？ ★★★★☆

##### 4. 什么是康威定律？ ★★★☆☆

##### 5. 如何进行微服务的拆分？ ★★★☆☆

##### 6. 微服务架构的服务治理有哪些实现方案？ ★★★★☆

##### 7. 什么是微服务的循环依赖？ ★★★☆☆

##### 8. 什么是DevOps？ ★★★☆☆

##### 9. 微服务中的CI/CD了解吗？ ★★★☆☆

##### 10. 听说过Service Mesh吗？是什么？ ★★★★☆

##### 11. 灰度发布、蓝绿部署、金丝雀部署都是什么？ ★★★★☆

##### 12. 限流、降级、熔断有什么区别？ ★★★★☆

##### 13. 什么是分布式命名方案？ ★★★☆☆

##### 14. 什么是负载均衡？有哪些常见算法？ ★★★★☆

##### 15. 如何解决接口幂等性的问题？ ★★★★☆

##### 16. 如何实现应用中的链路追踪？ ★★★★☆

##### 17. 什么是Canal？其工作原理是什么？ ★★★★☆

##### 18. 什么是分布式数据库？有什么优势？ ★★★☆☆

##### 19. 锁和分布式锁的核心区别是什么？ ★★★☆☆

##### 20. 什么是OAuth2？有什么用？ ★★★☆☆