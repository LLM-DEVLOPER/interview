## 六、数据库与持久化（MySQL、Redis、ES、MyBatis

### MySQL

#### MySQL基础与概念

##### 1. MySQL的存储引擎有哪些？InnoDB和MyISAM的区别是什么？ ★★★★☆

##### 2. 在实际场景中，自己如何选择使用MyISAM存储引擎还是InnoDB存储引擎？ ★★★☆☆

##### 3. 数据库的三范式是什么？为什么要反范式？ ★★★★☆

##### 4. char和varchar的区别是什么？ ★★★★☆

##### 5. float和double的区别是什么？ ★★★☆☆

##### 6. MySQL的内连接、左连接、右连接有什么区别？ ★★★☆☆

##### 7. MySQL 5.x和8.0有什么区别？ ★★★☆☆

##### 8. MySQL时间类型数据存储建议？ ★★★☆☆

##### 9. 如何获取当前数据库版本？ ★★★☆☆

##### 10. MySQL的数据存储一定基于硬盘的吗？ ★★★☆☆

##### 11. SQL中PK, UK, CK, FK, DF是什么意思？ ★★★☆☆

##### 12. MySQL自增主键用完了会怎样？ ★★★☆☆

##### 13. 数据库加密和解密？ ★★★☆☆

##### 14. 数据库加密后怎么做模糊查询？ ★★★☆☆

##### 15. 什么是MySQL的字典锁？ ★★★☆☆

##### 16. 什么是OnlineDDL？ ★★★☆☆

##### 17. 为什么不推荐使用外键？ ★★★☆☆

##### 18. 为什么不建议使用存储过程？ ★★★☆☆

##### 19. `truncate`、`delete`、`drop`的区别？ ★★★☆☆

##### 20. 是否支持emoji表情存储，如果不支持，如何操作？ ★★★☆☆

#### MySQL事务与并发

##### 1. 说一下ACID特性是什么？MySQL事务ACID是如何实现的？ ★★★★☆

##### 2. MySQL事务的隔离级别有哪些？分别解决了什么问题？ ★★★★★

##### 3. 什么是脏读、不可重复读和幻读？InnoDB如何解决脏读、不可重复读和幻读的？ ★★★★★

##### 4. 为什么MySQL默认使用RR隔离级别？大厂要改成RC吗？InnoDB的RR到底有没有解决幻读？ ★★★★★

##### 5. MySQL锁机制有哪些？乐观锁和悲观锁的区别？乐观锁和悲观锁如何实现？ ★★★★☆

##### 6. MySQL的行锁和表锁的区别是什么？InnoDB只有在通过索引条件检索数据时使用行级锁，否则使用表锁吗？ ★★★★☆

##### 7. 什么是意向锁？ ★★★☆☆

##### 8. 什么是排他锁和共享锁？ ★★★★☆

##### 9. 乐观锁的过程中，完全没有加任何锁吗？ ★★★☆☆

##### 10. 什么是MVCC？其原理是什么？当前读和快照读有什么区别？什么是ReadView，什么样的ReadView可见？ ★★★★★

##### 11. MySQL只操作一条记录，也会发生死锁吗？数据库死锁如何解决？ ★★★★☆

##### 12. MySQL的`select *`会用到事务吗？ ★★★☆☆

##### 13. MySQL事务2阶段提交是什么？MySQL 5.7中的组提交？ ★★★☆☆

##### 14. InnoDB的一次更新事务过程是怎样的？ ★★★★☆

##### 15. InnoDB支持哪几种行格式？ ★★★☆☆

##### 16. MySQL的update语句什么时候锁行什么时候锁表？ ★★★★☆

##### 17. Innodb中的表级锁、页级锁、行级锁？ ★★★★☆

##### 18. MySQL如何实现不同隔离级别？ ★★★★☆

#### MySQL索引

##### 1. MySQL索引是什么？为什么要用索引？ ★★★★☆

##### 2. MySQL索引底层数据结构与算法（B+树、哈希索引）？ ★★★★★

##### 3. 为什么MySQL InnoDB选择B+Tree作为索引数据结构？ ★★★★★

##### 4. 聚簇索引和非聚簇索引的区别是什么？ ★★★★☆

##### 5. 什么是回表？怎么减少回表的次数？ ★★★★☆

##### 6. 什么是覆盖索引？什么是索引下推？ ★★★★☆

##### 7. 什么情况下索引会失效？MySQL隐式转换造成索引失效？MySQL用了函数一定会索引失效吗？ ★★★★★

##### 8. `like %xxx`不走索引？`like xxx%`走索引吗？为什么？MySQL `like`的模糊查询如何优化？ ★★★★☆

##### 9. 什么时候适用索引？什么时候不需要创建索引？ ★★★★☆

##### 10. 如何验证MySQL索引是否满足需求？SQL执行计划分析的时候，要关注哪些信息？ ★★★★☆

##### 11. 什么是MySQL的最左前缀原则？为什么要遵守？MySQL索引一定遵循最左前缀匹配吗？ ★★★★★

##### 12. 联合索引中字段的顺序有影响吗？A, B, C的联合索引，按照AB, AC, BC查询，能走索引吗？ ★★★★★

##### 13. a,b两个单独索引，`where a=xx and b=xx`走哪个索引？a, b都有索引，`select * from table where a = xx order by b`? ★★★☆☆

##### 14. 什么是索引合并？原理是什么？ ★★★☆☆

##### 15. 唯一索引和主键索引的区别？联合索引是越多越好吗？ ★★★☆☆

##### 16. 区分度不高的字段建索引一定没用吗？ ★★★☆☆

##### 17. 从InnoDB的索引结构分析，为什么索引的key长度不能太长？ ★★★☆☆

##### 18. MySQL做索引更新的时候，会锁表吗？ ★★★☆☆

##### 19. Innodb加索引，这个时候会锁表吗？ ★★★★☆

##### 20. MySQL是如何保证唯一性索引的唯一性的？ ★★★☆☆

##### 21. 什么时候索引失效反而会提升效率？ ★★★☆☆

##### 22. 什么是索引跳跃扫描？ ★★★☆☆

##### 23. 二级索引在索引覆盖时如何使用MVCC？ ★★★★☆

##### 24. 怎么比较两个索引的好坏？ ★★★☆☆

#### MySQL优化与架构

##### 1. MySQL SQL优化常用方法？慢SQL的问题如何排查？ ★★★★★

##### 2. 说一说MySQL一条SQL语句的执行过程？一个查询语句的执行顺序是怎样的？on和where有什么区别？ ★★★★★

##### 3. limit的原理是什么？limit 0,100和limit 10000000,100一样吗？ ★★★★☆

##### 4. MySQL的深度分页如何优化？ ★★★★☆

##### 5. `order by`是怎么实现的？`limit`+`order by`为什么会数据重复？ ★★★★☆

##### 6. MySQL主从复制流程与原理？MySQL并行复制原理？什么是数据库的主从延迟，如何解决？ ★★★★★

##### 7. 分库分表策略（垂直、水平）？分库分表存在的问题（事务、跨库Join、额外数据管理负担和运算压力）？ ★★★★★

##### 8. 为什么大厂不建议使用多表join？MySQL的Hash Join是什么？MySQL执行大事务会存在什么问题？ ★★★★☆

##### 9. SQL语句如何实现`insertOrUpdate`的功能？ ★★★☆☆

##### 10. 什么是MySQL的优化器？优化器的索引成本是怎么算出来的？为什么MySQL会选错索引，如何解决？ ★★★★☆

##### 11. 如何优化一个大规模的数据库系统？ ★★★★☆

##### 12. MySQL如何做热点数据高效更新？ ★★★★☆

##### 13. MySQL的驱动表是什么？MySQL怎么选的？ ★★★☆☆

##### 14. `where`条件的顺序影响使用索引吗？ ★★★★☆

##### 15. `Using filesort`能优化吗，怎么优化？ ★★★★☆

##### 16. MySQL 8.0要取消查询缓存吗？ ★★★☆☆

##### 17. MySQL中如何查看一个SQL的执行耗时？ ★★★☆☆

##### 18. 数据库扫表任务如何避免出现死循环？ ★★★☆☆

##### 19. MySQL是用AP还是CP的系统？ ★★★★☆

##### 20. 如果SQL中一定要有join，该如何优化？ ★★★☆☆

##### 21. MySQL为什么是小表驱动大表，为什么能提高查询性能？ ★★★★☆

##### 22. 什么是数据库的锁升级，Innodb支持吗？ ★★★☆☆

#### MySQL底层原理

##### 1. MySQL自增主键一定是连续的吗？高并发情况下自增主键会不会重复？为什么？什么情况会导致自增主键不连续？ ★★★★☆

##### 2. MySQL的主键一定是自增的吗？uuid和自增id做主键哪个好，为什么？ ★★★★☆

##### 3. binlog、redolog和undolog区别？一次insert操作，MySQL的几种log的写入顺序？ ★★★★★

##### 4. 介绍下InnoDB的数据页，和B+树的关系是什么？ ★★★☆☆

##### 5. `buffer pool`是什么？`buffer pool`的读写过程是怎样的？什么是InnoDB的页分裂和页合并？ ★★★★☆

##### 6. `count(1)`、`count(*)`和`count(列名)`的区别？ ★★★★☆

##### 7. MySQL为什么会有存储（内存）碎片？有什么危害？什么是MySQL的内存碎片？如何清理？ ★★★★☆

##### 8. MySQL如何实现行转列和列转行？ ★★★☆☆

##### 9. 为什么尽量避免使用`select *`？表中有只有a,b,c三个字段，比较`select *`与`select a,b,c`有什么区别？ ★★★★☆

##### 10. MySQL建了abc的联合索引，底层会建a,ab,abc这3个索引吗？ ★★★☆☆

##### 11. MySQL的BLOB和TEXT有什么区别？ ★★★☆☆

##### 12. 什么是前缀索引？使用的时候要注意什么？ ★★★★☆

##### 13. `undo log`会一直存在吗？什么时候删除？ ★★★☆☆

### Redis

#### Redis基础与概念

##### 1. Redis是什么？有哪些使用场景？除了做缓存，Redis还能用来做什么？ ★★★★★

##### 2. Redis支持哪些数据类型？各自的应用场景是什么？ ★★★★★

##### 3. Redis有哪些功能？ ★★★★☆

##### 4. Redis和Memcached有什么区别？ ★★★★☆

##### 5. Redis支持的Java客户端有哪些？ ★★★☆☆

##### 6. Jedis和Redisson有哪些区别？如何选择？ ★★★★☆

##### 7. Redis使用什么协议进行通信？ ★★★☆☆

##### 8. Redis的Key和Value的设计原则有哪些？ ★★★☆☆

#### Redis内存与性能优化

##### 1. Redis为什么是单线程的？为什么Redis设计成单线程也能这么快？ ★★★★★

##### 2. Redis为什么这么快？I/O多路复用模型？ ★★★★★

##### 3. Redis 6.0引入了多线程，主要是为了解决什么问题？ ★★★★☆

##### 4. Redis如何做内存优化？ ★★★★☆

##### 5. Redis的虚拟内存机制是什么？ ★★★☆☆

##### 6. Redis常见的性能问题有哪些？如何解决？ ★★★★★

##### 7. 什么是热Key问题？如何解决热Key问题？ ★★★★☆

##### 8. 什么是大Key问题？如何解决大Key问题？ ★★★★☆

##### 9. Redis中有一批key瞬间过期，为什么其它key的读写效率会急剧下降？ ★★★☆☆

#### Redis持久化机制

##### 1. Redis的持久化机制是怎样的？ ★★★★☆

##### 2. Redis持久化方式（RDB、AOF）及区别？RDB和AOF的写回策略分别是什么？ ★★★★★

##### 3. RDB的优劣？AOF的优劣？ ★★★★☆

##### 4. Redis能完全保证数据不丢失吗？ ★★★☆☆

##### 5. Redis中key过期了，一定会立即删除吗？ ★★★★☆

##### 6. Redis的过期策略是怎样的？ ★★★★☆

#### Redis分布式与高可用方案

##### 1. Redis是AP的还是CP的？为什么？ ★★★★☆

##### 2. 介绍一下Redis的集群模式？什么是Redis的数据分片？ ★★★★☆

##### 3. Redis集群的脑裂问题？如何解决？ ★★★★☆

##### 4. Redis主从复制、哨兵模式、集群模式的区别与联系？各自的优缺点？ ★★★★★

##### 5. Redis主从一致性？ ★★★★☆

#### Redis分布式锁

##### 1. Redis如何实现分布式锁？如何用SETNX实现分布式锁？如何用Redisson实现分布式锁？ ★★★★★

##### 2. Redis分布式锁有什么缺陷？如何解决死锁问题？ ★★★★★

##### 3. Redis分布式锁如何续期？Redis锁超时任务没完怎么办？Redisson的watchdog机制是怎样的？ ★★★★★

##### 4. 分布式锁最终解决方案是RedLock吗？为什么？Redisson中为什么要废弃RedLock，该用啥？ ★★★★☆

##### 5. Redisson的watchdog什么情况下可能会失效？ ★★★☆☆

##### 6. Redisson如何保证解锁的线程一定是加锁的线程？ ★★★★☆

##### 7. 如何用Redisson实现一个可重入锁？ ★★★☆☆

##### 8. Redis实现分布式锁的时候，哪些问题需要考虑？ ★★★☆☆

##### 9. 如何用Redis实现乐观锁？ ★★★☆☆

#### Redis缓存问题与解决方案

##### 1. 如何保证缓存和数据库数据的一致性？ ★★★★★

##### 2. 什么情况下会出现数据库和缓存不一致的问题？如何解决Redis和数据缓存不一致问题？ ★★★★★

##### 3. 为什么需要延迟双删，两次删除的原因是什么？ ★★★★☆

##### 4. 什么是缓存穿透？怎么解决？ ★★★★★

##### 5. 什么是缓存击穿？怎么解决？ ★★★★★

##### 6. 什么是缓存雪崩？怎么解决？ ★★★★★

##### 7. 缓存击穿、缓存穿透、缓存雪崩等问题如何解决？ ★★★★★

##### 8. Redis如何实现延迟消息？ ★★★☆☆

##### 9. Redis如何实现滑动窗口限流？ ★★★★☆

##### 10. 对于Redis的操作，有哪些推荐的Best Practices？ ★★★☆☆

##### 11. Redis如何高效安全的遍历所有key？ ★★★★☆

#### Redis高级特性与底层实现

##### 1. Redis支持哪些高级数据类型（GEO，Stream，HyperLogLog，Bitmap）？GEO有什么用？Stream是什么？ ★★★★☆

##### 2. Redis中Zset是怎么实现的？ZSet既能支持高效的范围查询，还能以O(1)复杂度查询，为什么？ ★★★★★

##### 3. 跳跃表为什么不用平衡树实现？ ★★★★☆

##### 4. Redis为什么自己要自定义SDS（Simple Dynamic String）？ ★★★★☆

##### 5. 为什么Lua脚本可以保证原子性？ ★★★★☆

##### 6. Redis中的setnx命令为什么是原子性的？setnx和setex有啥区别？ ★★★★☆

##### 7. Redis的事务机制是怎样的？Redis的事务和MySQL的事务区别？ ★★★★☆

##### 8. Redis中的Pipeline，和事务有什么区别？ ★★★★☆

##### 9. Redis的事务和Lua之间有哪些区别？ ★★★★☆

##### 10. Redisson的lock和tryLock有什么区别？ ★★★☆☆

##### 11. 为什么Redis不支持回滚？ ★★★☆☆

##### 12. Redis中hash结构比string的好处有哪些？ ★★★☆☆

##### 13. Redis 8.0有哪些新特性？ ★★★☆☆

### Elasticsearch

#### Elasticsearch基础与核心概念

##### 1. 为什么使用Elasticsearch？和传统关系型数据库（如MySQL）有什么区别？ ★★★★☆

##### 2. Elasticsearch是什么？有哪些使用场景？ ★★★★☆

##### 3. Elasticsearch为什么快？ ★★★★☆

##### 4. Elasticsearch支持哪些数据类型，和MySQL之间的映射关系是怎样的？ ★★★☆☆

##### 5. Elasticsearch的集群架构是怎样的？（节点类型、分片与副本） ★★★★☆

#### Elasticsearch核心原理

##### 1. 倒排索引是什么？其工作原理是怎样的？ ★★★★★

##### 2. Elasticsearch的数据写入和查询流程是怎样的？ ★★★★☆

##### 3. 如何保证ES和数据库的数据一致性？ ★★★★☆

##### 4. Elasticsearch支持事务吗？为什么？ ★★★☆☆

##### 5. ES支持乐观锁吗？如何实现的？ ★★★☆☆

#### Elasticsearch优化与问题

##### 1. 什么是Elasticsearch的深度分页问题？如何解决？ ★★★★☆

##### 2. 如何优化Elasticsearch搜索性能？ ★★★★☆

##### 3. ES不支持decimal，如何避免丢失精度？ ★★★☆☆

##### 4. Elasticsearch分片数设置多少合适？ ★★★★☆

##### 5. 什么是Elasticsearch的“脑裂”问题？如何避免？ ★★★☆☆

##### 6. Elasticsearch如何实现数据更新和删除的？ ★★★☆☆

##### 7. Elasticsearch如何进行数据建模？嵌套文档与父子文档的区别？ ★★★☆☆

##### 8. 什么是相关性评分（_score）？如何影响搜索结果？ ★★★☆☆

### MyBatis

#### MyBatis基础与概念

##### 1. 什么是ORM，MyBatis和Hibernate有什么区别？ ★★★★☆

##### 2. MyBatis是什么？有哪些优点？ ★★★★☆

##### 3. MyBatis的核心组件有哪些？它们分别有什么作用？ ★★★★☆

##### 4. MyBatis用的什么连接池？如何配置和优化？ ★★★★☆

##### 5. MyBatis-Plus有什么用？它提供了哪些便利功能？ ★★★★☆

#### MyBatis工作原理

##### 1. MyBatis的工作原理？（从SqlSessionFactory到执行SQL的整个流程） ★★★★☆

##### 2. MyBatis是如何实现字段映射的？（ResultMap） ★★★★☆

##### 3. #{}和${}的区别是什么？什么情况必须用$？ ★★★★★

##### 4. MyBatis插件的运行原理？（插件接口、四大对象） ★★★★☆

##### 5. MyBatis的Mapper接口工作原理是什么？（Mapper代理） ★★★★☆

#### MyBatis缓存机制

##### 1. MyBatis缓存机制（一级缓存、二级缓存）？它们的区别、作用域和生命周期是怎样的？ ★★★★★

##### 2. MyBatis二级缓存存在哪些问题？如何解决？ ★★★★☆

#### MyBatis动态SQL与分页

##### 1. MyBatis可以实现动态SQL吗？常用的动态SQL标签有哪些？ ★★★★☆

##### 2. 使用MyBatis如何实现分页？ ★★★★☆

##### 3. RowBounds分页的原理是什么？它有什么优缺点？ ★★★★☆

##### 4. PageHelper分页的原理是什么？它与RowBounds的区别？ ★★★★☆

##### 5. MyBatis-Plus的分页原理是什么？ ★★★☆☆

#### MyBatis延迟加载

##### 1. MyBatis是否支持延迟加载？实现原理是什么？（关联查询、嵌套查询） ★★★☆☆

##### 2. 什么是N+1问题？MyBatis如何解决N+1问题？ ★★★★☆

#### MyBatis事务

##### 1. MyBatis如何进行事务管理？ ★★★☆☆